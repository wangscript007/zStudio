(function(k){function u(b){b.async&&(b.filesLoaded+=1,b.filesLoaded===b.totalFiles&&b.callback&&b.callback())}function v(b,a){null!=b&&0<b.length&&w(b[0],a,function(){b.shift();v(b,a)})}function w(b,a,d){null!=b&&k.ajax({url:b,async:a.async,cache:a.cache,dataType:"text",success:function(b,e){x(b,a.mode);d();u(a)},error:function(c,e,g){console.log("Failed to download or parse "+b);u(a)}})}function x(b,a){for(var d="",c=b.split(/\n/),e=/(\{\d+})/g,g=/\{(\d+)}/g,p=/(\\u.{4})/ig,n=0;n<c.length;n++)if(c[n]=
c[n].replace(/^\s\s*/,"").replace(/\s\s*$/,""),0<c[n].length&&"#"!=c[n].match("^#")){var f=c[n].split("=");if(0<f.length){for(var m=decodeURI(f[0]).replace(/^\s\s*/,"").replace(/\s\s*$/,""),h=1==f.length?"":f[1];"\\"==h.match(/\\$/);)h=h.substring(0,h.length-1),h+=c[++n].replace(/\s\s*$/,"");for(var l=2;l<f.length;l++)h+="="+f[l];h=h.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if("map"==a||"both"==a){if(f=h.match(p))for(l=0;l<f.length;l++)h=h.replace(f[l],y(f[l]));k.i18n.map[m]=h}if("vars"==a||"both"==
a)if(h=h.replace(/"/g,'\\"'),z(m),e.test(h)){for(var f=h.split(e),l=!0,r="",t=[],q=0;q<f.length;q++)!e.test(f[q])||0!=t.length&&-1!=t.indexOf(f[q])||(l||(r+=","),r+=f[q].replace(g,"v$1"),t.push(f[q]),l=!1);d+=m+"=function("+r+"){";m='"'+h.replace(g,'"+v$1+"')+'"';d+="return "+m+";};"}else d+=m+'="'+h+'";'}}eval(d)}function z(b){if(/\./.test(b)){var a="";b=b.split(/\./);for(var d=0;d<b.length;d++)0<d&&(a+="."),a+=b[d],eval("typeof "+a+' == "undefined"')&&eval(a+"={};")}}function y(b){var a=[];b=parseInt(b.substr(2),
16);0<=b&&b<Math.pow(2,16)&&a.push(b);b="";for(var d=0;d<a.length;++d)b+=String.fromCharCode(a[d]);return b}k.i18n={};k.i18n.map={};k.i18n.properties=function(b){b=k.extend({name:"Messages",language:"",path:"",mode:"vars",cache:!1,encoding:"UTF-8",async:!1,checkAvailableLanguages:!1,callback:null},b);b.language=this.normaliseLanguageCode(b.language);var a=function(a){console.log("HERE1");b.totalFiles=0;b.filesLoaded=0;var c=b.name,c=c&&c.constructor==Array?c:[c];if(b.async)for(var d=0,e=c.length;d<
e;d++){b.totalFiles+=1;var f=b.language.substring(0,2);if(0==a.length||-1!=k.inArray(f,a))b.totalFiles+=1;5<=b.language.length&&(f=b.language.substring(0,5),0==a.length||-1!=k.inArray(f,a))&&(b.totalFiles+=1)}for(var m,h,e=0,l=c.length;e<l;e++){d=b.path+c[e]+".properties";f=b.language.substring(0,2);if(0==a.length||-1!=k.inArray(f,a))m=b.path+c[e]+"_"+f+".properties";5<=b.language.length&&(f=b.language.substring(0,5),0==a.length||-1!=k.inArray(f,a))&&(h=b.path+c[e]+"_"+f+".properties");v([d,m,h],
b);m=h=null}b.callback&&!b.async&&b.callback()};if(b.checkAvailableLanguages){var d=b.path+b.name+"_languages.json",c=b.path+"languages.json";k.ajax({url:d,async:b.async,cache:!1,dataType:"json",success:function(b,c,d){a(b.languages||[])},error:function(e,g,p){console.log("HERE2");k.ajax({url:c,async:b.async,cache:!1,dataType:"json",success:function(b,c,d){console.log("HERE3");a(b.languages||[])},error:function(b,e,g){console.log("Failed to download either "+d+" or "+c);a([])}})}})}else a([])};k.i18n.prop=
function(b){var a=k.i18n.map[b];if(null==a)return"["+b+"]";var d;2==arguments.length&&k.isArray(arguments[1])&&(d=arguments[1]);var c;if("string"==typeof a){for(c=0;-1!=(c=a.indexOf("\\",c));)a="t"==a.charAt(c+1)?a.substring(0,c)+"\t"+a.substring(c++ +2):"r"==a.charAt(c+1)?a.substring(0,c)+"\r"+a.substring(c++ +2):"n"==a.charAt(c+1)?a.substring(0,c)+"\n"+a.substring(c++ +2):"f"==a.charAt(c+1)?a.substring(0,c)+"\f"+a.substring(c++ +2):"\\"==a.charAt(c+1)?a.substring(0,c)+"\\"+a.substring(c++ +2):a.substring(0,
c)+a.substring(c+1);var e=[],g,p;for(c=0;c<a.length;)if("'"==a.charAt(c))if(c==a.length-1)a=a.substring(0,c);else if("'"==a.charAt(c+1))a=a.substring(0,c)+a.substring(++c);else{for(g=c+2;-1!=(g=a.indexOf("'",g));)if(g==a.length-1||"'"!=a.charAt(g+1)){a=a.substring(0,c)+a.substring(c+1,g)+a.substring(g+1);c=g-1;break}else a=a.substring(0,g)+a.substring(++g);-1==g&&(a=a.substring(0,c)+a.substring(c+1))}else"{"==a.charAt(c)?(g=a.indexOf("}",c+1),-1==g?c++:(p=parseInt(a.substring(c+1,g)),!isNaN(p)&&0<=
p?(c=a.substring(0,c),""!=c&&e.push(c),e.push(p),c=0,a=a.substring(g+1)):c=g+1)):c++;""!=a&&e.push(a);a=e;k.i18n.map[b]=e}if(0==a.length)return"";if(1==a.length&&"string"==typeof a[0])return a[0];e="";for(c=0;c<a.length;c++)e="string"==typeof a[c]?e+a[c]:d&&a[c]<d.length?e+d[a[c]]:!d&&a[c]+1<arguments.length?e+arguments[a[c]+1]:e+("{"+a[c]+"}");return e};k.i18n.normaliseLanguageCode=function(b){if(!b||2>b.length)b=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage||
"en";b=b.toLowerCase();b=b.replace(/-/,"_");3<b.length&&(b=b.substring(0,3)+b.substring(3).toUpperCase());return b}})(jQuery);
